<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory - Laptop Tracking System</title>
    <link rel="stylesheet" href="/static/css/output.css" />
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center space-x-8">
                    <h1 class="text-xl font-bold text-gray-900">Laptop Tracking System</h1>
                    <a href="/dashboard" class="text-sm text-gray-600 hover:text-gray-900">Dashboard</a>
                    <a href="/shipments" class="text-sm text-gray-600 hover:text-gray-900">Shipments</a>
                    <a href="/inventory" class="text-sm text-blue-600 font-medium">Inventory</a>
                    <a href="/calendar" class="text-sm text-gray-600 hover:text-gray-900">Calendar</a>
                </div>
                <div class="flex items-center">
                    {{if .User}}
                    <span class="text-sm text-gray-600 mr-4">{{.User.Email}} ({{.User.Role | title}})</span>
                    <a href="/logout" class="text-sm text-blue-600 hover:text-blue-700">Logout</a>
                    {{end}}
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
        <!-- Header -->
        <div class="mb-8">
            <div class="flex items-center justify-between">
                <div>
                    <h2 class="text-3xl font-bold text-gray-900">Laptop Inventory</h2>
                    <p class="mt-2 text-gray-600">Manage and track all laptop devices</p>
                </div>
                {{if or (eq .User.Role "logistics") (eq .User.Role "warehouse")}}
                <a href="/inventory/add" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium">
                    + Add Laptop
                </a>
                {{end}}
            </div>
        </div>

        <!-- Search and Filter Bar -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <form method="GET" action="/inventory" class="flex flex-col md:flex-row gap-4">
                <!-- Search Input -->
                <div class="flex-1">
                    <label for="search" class="block text-sm font-medium text-gray-700 mb-1">Search</label>
                    <input 
                        type="text" 
                        id="search" 
                        name="search" 
                        value="{{.SearchQuery}}"
                        placeholder="Search by serial number, brand, or model..."
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                    />
                </div>

                <!-- Status Filter -->
                <div class="w-full md:w-48">
                    <label for="status" class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                    <select 
                        id="status" 
                        name="status"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                    >
                        <option value="">All Statuses</option>
                        {{range .Statuses}}
                        <option value="{{.}}" {{if eq . $.StatusFilter}}selected{{end}}>
                            {{. | replace "_" " " | title}}
                        </option>
                        {{end}}
                    </select>
                </div>

                <!-- Search Button -->
                <div class="flex items-end">
                    <button 
                        type="submit"
                        class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium"
                    >
                        Search
                    </button>
                </div>
            </form>
        </div>

        <!-- Inventory Table -->
        <div class="bg-white rounded-lg shadow-md overflow-hidden">
            {{if .Laptops}}
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                Serial Number
                            </th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                Brand
                            </th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                Model
                            </th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                Specs
                            </th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                Status
                            </th>
                            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                                Actions
                            </th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        {{range .Laptops}}
                        <tr class="hover:bg-gray-50 transition-colors">
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-medium text-gray-900">{{.SerialNumber}}</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm text-gray-900">{{if .Brand}}{{.Brand}}{{else}}-{{end}}</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm text-gray-900">{{if .Model}}{{.Model}}{{else}}-{{end}}</div>
                            </td>
                            <td class="px-6 py-4">
                                <div class="text-sm text-gray-900">{{if .Specs}}{{.Specs}}{{else}}-{{end}}</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full {{statusColor .Status}}">
                                    {{.Status | replace "_" " " | title}}
                                </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                <div class="flex items-center justify-end space-x-2">
                                    <a href="/inventory/{{.ID}}" class="text-blue-600 hover:text-blue-900">View</a>
                                    {{if or (eq $.User.Role "logistics") (eq $.User.Role "warehouse")}}
                                    <a href="/inventory/{{.ID}}/edit" class="text-green-600 hover:text-green-900">Edit</a>
                                    {{end}}
                                </div>
                            </td>
                        </tr>
                        {{end}}
                    </tbody>
                </table>
            </div>
            {{else}}
            <div class="text-center py-12">
                <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                </svg>
                <h3 class="mt-4 text-lg font-medium text-gray-900">No laptops found</h3>
                <p class="mt-2 text-gray-600">{{if or .SearchQuery .StatusFilter}}Try adjusting your search criteria{{else}}Add a laptop to get started{{end}}</p>
            </div>
            {{end}}
        </div>
    </div>
</body>
</html>

